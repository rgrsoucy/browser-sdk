!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.relayr=t():e.relayr=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var i,o,r;!function(s,a){o=[t,n(2),n(3),n(5),n(14),n(12),n(13),n(4),n(10)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i,o,r,s,a,c){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.Transmitter=e.Model=e.Group=e.Device=e.User=e.Oauth2=void 0;var h=u(t),f=u(n),d=u(i),l=u(o),p=u(r),v=u(s),g=u(a);e.Oauth2=h.default,e.User=f.default,e.Device=d.default,e.Group=l.default,e.Model=p.default,e.Transmitter=v.default;var y={persistToken:!0,mqtt:{endpoint:"mqtt.relayr.io"},ajax:{uri:"api.relayr.io",dataUri:"data.relayr.io",protocol:"https://"}},_=void 0,w=void 0,m=void 0,b={init:function(e,t){w=e,t&&(Object.assign(y,t),a.ajax.options=y.ajax)},authorize:function(e){return new Promise(function(t,n){m||(m=new h.default({protocol:a.ajax.options.protocol,uri:a.ajax.options.uri,appId:w.id,redirectURI:w.redirectURI,persist:y.persistToken}));var i=void 0;e?i=e:(m.login(),i=m.token),a.ajax.options.token=i,_=new f.default(y),b._verifyToken(_).then(function(){t(_)}).catch(function(e){m.logout(),m.login()})})},_verifyToken:function(e){return new Promise(function(t,n){e.getUserInfo().then(function(e){t()}).catch(function(e){401==e.status&&console.log("your token is invalid, please log in again"),n(e)})})},logout:function(){if(!m)throw new Error("You must log in before you can log out");m.logout(),m=null},getConfig:function(){return y},getCurrentUser:function(){return _},customAjax:function(e){if(e)return new g.default(e);throw new Error("Provide the custom configuration to make a new Ajax instance")}};e.default=b})},function(e,t,n){var i,o,r;!function(n,s){o=[e,t],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o="relayr_access_token",r=function(){function e(t){n(this,e),this.uri=t.uri||"api.relayr.io",this.appId=t.appId,this.redirectURI=t.redirectURI,this.shouldPersist=t.persist||!1,this.protocol=t.protocol||"https://"}return i(e,[{key:"login",value:function(e,t){if(!this.redirectURI)throw Error("OAuth2 a valid redirect uri must be provided on login");if(!this.appId)throw Error("OAuth2 a valid app ID must be provided on login");var n=localStorage.getItem(o);if(this.shouldPersist&&n)return void(this.token=n);try{if(this._parseToken(window.location.href))return}catch(e){}var i=({client_id:this.appId,redirect_uri:this.redirectURI,scope:"access-own-user-info+configure-devices"},""+this.protocol+this.uri+"/oauth2/auth?client_id="+this.appId+"&redirect_uri="+this.redirectURI+"&response_type=token&scope=access-own-user-info+configure-devices");this._loginRedirect(i)}},{key:"_loginRedirect",value:function(e){window.location.assign(e)}},{key:"_parseToken",value:function(e){var t=e.split("#");if(t[0]&&0===t[0].length||t[1]&&0===t[1].length)throw Error("The provided URL is not correctly formatted");var n=t[1].split("&"),i=n.reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{});if(!i.token_type)throw Error("The provided URL does not contain a access token");return this.token=i.token_type+" "+i.access_token,this.setToken(this.token),this.token}},{key:"setToken",value:function(e){localStorage.setItem(o,this.token)}},{key:"logout",value:function(){localStorage.removeItem(o)}}]),e}();t.default=r,e.exports=t.default})},function(e,t,n){var i,o,r;!function(s,a){o=[e,t,n(4),n(5)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(i),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(t){r(this,e),this.config=t,this.token=n.ajax.options.token}return a(e,[{key:"getUserInfo",value:function(){var e=this;return new Promise(function(t,i){e.userInfo?t(e.userInfo):n.ajax.get("/oauth2/user-info").then(function(i){e.userInfo=Object.assign({},i,{token:n.ajax.options.token}),t(e.userInfo)}).catch(function(e){i(e)})})}},{key:"getMyDevices",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(i,o){e.getUserInfo().then(function(){n.ajax.get("/users/"+e.userInfo.id+"/devices").then(function(n){t.asClasses?i(n.map(function(t){return new s.default(t,e.config)})):(e.devicesCache=n,i(n))}).catch(o)})})}},{key:"searchForDevices",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.query)throw new Error("Please provide a query object");var i=t.query,o=i.name,r=i.description,a=i.ids,c=i.modelId,u=i.firmwareVersion;return new Promise(function(i,h){n.ajax.get("/devices",{queryObj:{device_name:o,device_description:r,device_ids:a,model_id:c,firmware_version:u}}).then(function(n){var o=n.data;i(t.asClasses?o.map(function(t){return new s.default(t,e.config)}):o)},h)})}},{key:"getMyGroups",value:function(){var e=this;return new Promise(function(t,i){e.getUserInfo().then(function(){n.ajax.get("/users/"+e.userInfo.id+"/groups").then(function(e){t(e)}).catch(function(e){i(e)})})})}},{key:"getMyTransmitters",value:function(){var e=this;return new Promise(function(t,i){e.getUserInfo().then(function(){n.ajax.get("/users/"+e.userInfo.id+"/transmitters").then(function(e){t(e)}).catch(function(e){i(e)})})})}},{key:"getMyApps",value:function(){var e=this;return new Promise(function(t,i){e.getUserInfo().then(function(){n.ajax.get("/users/"+e.userInfo.id+"/apps").then(function(e){t(e)}).catch(function(e){i(e)})})})}},{key:"_getConfig",value:function(){return this.config}},{key:"getCachedDevices",value:function(){var e=this;return new Promise(function(t,n){t(e.devicesCache?e.devicesCache:[])})}}]),e}();t.default=c,e.exports=t.default})},function(e,t,n){var i,o,r;!function(n,s){o=[t],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(n){t(this,e),this.options=n}return n(e,[{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{contentType:"application/json"};if("/"!==e.charAt(0))throw new Error("Please provide a url with a leading /");if(!e)throw new Error("Please provide atleast a url");if("string"!=typeof e)throw new Error("Please provide a string url");return e+=this._serializeQueryStr(n.queryObj),new Promise(function(i,o){t._xhrRequest({type:"GET",url:e,isObject:n.raw||!0,contentType:n.contentType}).then(function(e){i(e)}).catch(function(e){o(e)})})}},{key:"post",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{contentType:"application/json",raw:!0};if("/"===!e.charAt(0))throw new Error("Please provide a url with a leading /");if(!e)throw new Error("Please provide atleast a url");if("string"!=typeof e)throw new Error("Please provide a string url");return i.raw===!1&&(i.raw=!1),i.raw===!0&&(i.raw=!0),new Promise(function(o,r){n._xhrRequest({type:"POST",url:e,body:t,isObject:i.raw,contentType:i.contentType}).then(function(e){o(e)}).catch(function(e){r(e)})})}},{key:"patch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{contentType:"application/json"};if("/"===!e.charAt(0))throw new Error("Please provide a url with a leading /");if(!e)throw new Error("Please provide atleast a url");if("string"!=typeof e)throw new Error("Please provide a string url");return new Promise(function(o,r){n._xhrRequest({type:"PATCH",url:e,body:t,isObject:i.raw||!0,contentType:i.contentType}).then(function(e){o(e)}).catch(function(e){r(e)})})}},{key:"delete",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{contentType:"application/json"};if("/"===!e.charAt(0))throw new Error("Please provide a url with a leading /");if(!e)throw new Error("Please provide atleast a url");if("string"!=typeof e)throw new Error("Please provide a string url");return new Promise(function(i,o){t._xhrRequest({type:"DELETE",url:e,contentType:n.contentType}).then(function(e){i(e)}).catch(function(e){o(e)})})}},{key:"_serializeQueryStr",value:function(e){if(!e||0===Object.keys(e).length)return"";var t=Object.keys(e).map(function(t){return e[t]||"number"==typeof e[t]?encodeURIComponent(t)+"="+encodeURIComponent(e[t]):null}).filter(function(e){return!!e});return 0===t.length?"":"?"+t.join("&")}},{key:"_xhrRequest",value:function(e){var t=void 0;return t=new XMLHttpRequest,t.open(e.type,""+this.options.protocol+this.options.uri+e.url,!0),t.setRequestHeader("Authorization",this.options.token),t.setRequestHeader("Content-Type",e.contentType),new Promise(function(n,i){t.onreadystatechange=function(){4===t.readyState&&(t.status>199&&t.status<299?n(e.isObject&&""!==t.responseText.trim()?JSON.parse(t.responseText):t.responseText):t.status>399&&t.status<499?(console.log("there seems to be a problem on the client side"),i(t)):t.status>499&&(console.log("there seems to be a problem on the server side"),i(t)))},e.body?t.send(JSON.stringify(e.body)):t.send()})}},{key:"options",set:function(e){this._options={tokenType:"Bearer",token:"notoken",uri:"api.relayr.io",protocol:"https://"},Object.assign(this._options,e)},get:function(){return this._options}}]),e}();e.ajax=new i({});e.default=i})},function(e,t,n){var i,o,r;!function(s,a){o=[e,t,n(4),n(6),n(7),n(10),n(12)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i,o,r,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=(a(n),a(i)),h=a(o),f=a(s),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=null,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];c(this,e),this.rawDevice=t,this.config=n,this.id=t.id,this.name=t.name,this.modelId=t.modelId,this.model=new f.default(this.modelId,n),this.description=t.description,this.owner=t.owner,this.openToPublic=t.public,this.history=new h.default(t,n),this.configurations=[],this.commands=[],this.metadata={}}return d(e,[{key:"updateDevice",value:function(e,t){var i=this;if(!this.id)throw new Error("Provide the device id during instantiation");if(!e)throw new Error("Provide a patch of parameters to update");if(!Object.keys(e).length)throw new Error("Provide a patch with some parameters to update");for(var o in e)if(!this.hasOwnProperty(o))throw new Error("Provide a patch with relevant parameters to update");return new Promise(function(o,r){n.ajax.patch("/devices/"+i.id,e,{raw:t}).then(function(e){i.name=e.name,i.modelId=e.modelId,i.owner=e.owner,i.openToPublic=e.public,o(e)}).catch(function(e){r(e)})})}},{key:"getHistoricalData",value:function(e){return this.history.getHistoricalData(e)}},{key:"getAllHistoricalData",value:function(e){return this.history.getAllHistoricalData(e)}},{key:"getReadings",value:function(){if(!this.id)throw new Error("Provid a device id");return n.ajax.get("/devices/"+this.id+"/readings")}},{key:"deleteDevice",value:function(e){var t=this;if(!this.id)throw new Error("Provide the device id during instantiation");return new Promise(function(e,i){n.ajax.delete("/devices/"+t.id).then(function(t){e(t)}).catch(function(e){i(e)})})}},{key:"sendCommand",value:function(e,t){var i=this;if(!this.id)throw new Error("Provide the device id during instantiation");if(!e)throw new Error("Provide a command");if(!e.path&&!e.name&&!e.value)throw new Error("Provide a properly formatted command");return new Promise(function(o,r){n.ajax.post("/devices/"+i.id+"/commands",e,{raw:t}).then(function(e){o(e)}).catch(function(e){r(e)})})}},{key:"getChannel",value:function(e){var t=this;return new Promise(function(i,o){if(t._channelCredentials)i(t._channelCredentials);else{var r={deviceId:t.id,transport:e||"mqtt"};n.ajax.post("/channels",r).then(function(e){t._channelCredentials=e,l||(l=t._channelCredentials),i(e)}).catch(function(e){o(e)})}})}},{key:"connect",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mqtt",new u.default),t=this.getChannel(),n=function(t){var n={password:l.credentials.password,userName:l.credentials.user};return r.mqtt.subscribe(t.credentials.topic,e.event),e.unsubscribe=function(){r.mqtt.unsubscribe(t.credentials.topic,e.event)},r.mqtt.connect(n)};return new Promise(function(i,o){t.then(n).then(function(){i(e)})})}},{key:"getDeviceState",value:function(){var e=this;if(!this.id)throw new Error("Provide the device id during instantiation");return new Promise(function(t,i){n.ajax.get("/devices/"+e.id+"/state").then(function(e){t(e)}).catch(function(e){i(e)})})}},{key:"getDeviceConfigurations",value:function(){var e=this;if(!this.id)throw new Error("Provide the device id during instantiation");return new Promise(function(t,i){n.ajax.get("/devices/"+e.id+"/configurations").then(function(n){e.configurations=n,t(n)}).catch(function(e){i(e)})})}},{key:"setDeviceConfigurations",value:function(e){var t=this;if(!this.id)throw new Error("Provide the userId during instantiation");if(!e)throw new Error("Provide a schema of parameters to set");if(!Object.keys(e).length)throw new Error("Provide a schema with some parameters to set");if(!(e.path&&e.name&&e.value))throw new Error("Provide a schema with path, name, and value");return new Promise(function(i,o){n.ajax.post("/devices/"+t.id+"/configurations",e).then(function(e){t.configurations.push(e),i(e)}).catch(function(e){o(e)})})}},{key:"getDeviceCommands",value:function(){var e=this;if(!this.id)throw new Error("Provide the deviceId during instantiation");return new Promise(function(t,i){n.ajax.get("/devices/"+e.id+"/commands").then(function(e){t(e)}).catch(function(e){i(e)})})}},{key:"setDeviceCommands",value:function(e){var t=this;if(!this.id)throw new Error("Provide the userId during instantiation");if(!e)throw new Error("Provide a schema of parameters to set");if(!Object.keys(e).length)throw new Error("Provide a schema with some parameters to set");if(!(e.path&&e.name&&e.value))throw new Error("Provide a schema with path, name, and value");return new Promise(function(i,o){n.ajax.post("/devices/"+t.id+"/commands",e).then(function(e){t.commands.push(e),i(e)}).catch(function(e){o(e)})})}},{key:"getDeviceMetadata",value:function(){var e=this;if(!this.id)throw new Error("Provide the deviceId during instantiation");return new Promise(function(t,i){n.ajax.get("/devices/"+e.id+"/metadata").then(function(e){t(e)}).catch(function(e){i(e)})})}},{key:"setDeviceMetadata",value:function(e){var t=this;if(!this.id)throw new Error("Provide the userId during instantiation");if(!e)throw new Error("Provide a schema of parameters to set");if(!Object.keys(e).length)throw new Error("Provide a schema with some parameters to set");return new Promise(function(i,o){n.ajax.post("/devices/"+t.id+"/metadata",e,{raw:!1}).then(function(n){t.metadata=e,i(n)}).catch(function(e){o(e)})})}},{key:"deleteDeviceMetadata",value:function(){var e=this;if(!this.id)throw new Error("Provide the userId during instantiation");return new Promise(function(t,i){n.ajax.delete("/devices/"+e.id+"/metadata").then(function(e){t(e)}).catch(function(e){i(e)})})}}]),e}();t.default=p,e.exports=t.default})},function(e,t,n){var i,o,r;!function(n,s){o=[e,t],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(){var e=this;this.buffer=[],this.event=function(t){e._dataSubscriber?e._dataSubscriber(t):e.buffer.push(t)},this._flush=function(){if(e._dataSubscriber)for(var t=e.buffer.length-1;t>=0;t--)e._dataSubscriber(e.buffer[t])&&e.buffer.splice(t,1)},this.unsubscribe=function(){},this.on=function(t,n){switch(t){case"data":e._dataSubscriber=n,this._flush();break;case"error":break;case"connectionLost":break;case"reconnecting":}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default})},function(e,t,n){var i,o,r;!function(s,a){o=[e,t,n(4),n(8),n(9)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),c=r(i),u=r(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];s(this,e),this.id=t.id,this.ajax=new a.default({uri:i.ajax.dataUri,token:n.ajax.options.token})}return h(e,[{key:"getHistoricalData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.limit,i=void 0===n?1e3:n,o=t.offset,r=void 0===o?0:o,s=t.end,a=t.start,h=t.sample,f=t.periode,d=t.meaning,l=t.path,p={};if(f&&f.length>0){var v=(0,c.default)(f);h=v.sampleSize,a=v.start,s=v.end}return void 0!==h&&(p.sample=h),s&&(p.end=s.getTime()),a&&(p.start=a.getTime()),d&&(p.meaning=d),l&&(p.path=l),p.offset=r,p.limit=i,new Promise(function(t,n){e.ajax.get("/history/devices/"+e.id,{queryObj:p}).then(function(e){t({points:new u.default(e.results),response:e})},n)})}},{key:"getAllHistoricalData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=void 0,i=t.onDataReceived;t.periode;i=i||function(){};var o=function(e){return e.count>e.limit&&e.count-e.offset>e.limit},r=function(e,t,r){e.points&&!n?n=e.points:e.response&&e.response.results&&n.addPoints(e.response.results),i(n),o(e.response)?s({offset:e.response.offset+e.response.limit},t,r):t({points:n})},s=function(t,n,i){e.getHistoricalData(t).then(function(e){r(e,n,i)},i)};return new Promise(function(e,n){s(t,e,n)})}}]),e}();t.default=f,e.exports=t.default})},function(e,t,n){var i,o,r;!function(n,s){o=[e,t],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e){var t={end:new Date},n=new Date,r=null;switch(e){case"1h":n=new Date(t.end.getTime()-i),r="1m";break;case"5h":n=new Date(t.end.getTime()-5*i),r="1m";break;case"1d":n=new Date(t.end.getTime()-24*i),r="1m";break;case"1w":n=new Date(t.end.getTime()-24*i*7),r="1h";break;case"1m":n=new Date(t.end.getTime()-24*i*o()),r="1h";break;case"1y":n.setFullYear(t.end.getFullYear()-1),r="1h"}return t.start=n,t.sampleSize=r,t}Object.defineProperty(t,"__esModule",{value:!0});var i=36e5,o=function(){var e=new Date;return e.setDate(0),e.getDate()};t.default=n,e.exports=t.default})},function(e,t,n){var i,o,r;!function(n,s){o=[e,t],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){return n(this,e),t?(this.devicesPoints={},void this.addPoints(t)):{}}return i(e,[{key:"addPoints",value:function(e){var t=this;e.forEach(function(e){var n=t._getKey(e.meaning,e.path);t.devicesPoints[n]?t.devicesPoints[n].points=t.devicesPoints[n].points.concat(e.points):(t.devicesPoints[n]=Object.assign({id:e.deviceId},e),delete t.devicesPoints[n].deviceId)})}},{key:"_getKey",value:function(e,t){return t&&"null"!==t?e&&"null"!==e?e+"-"+t:t:e}},{key:"get",value:function(e,t){return this.devicesPoints[this._getKey(e,t)]}}]),e}();t.default=o,e.exports=t.default})},function(e,t,n){var i,o,r;!function(s,a){o=[t,n(11)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.mqtt=void 0;var o=n(t),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e);this.config={endpoint:"mqtt.relayr.io",port:443,mqttTimeout:1e4,reconnectLimit:10,reconnectTimeout:6e4},t&&Object.assign(this.config,t),this.endpoint=this.config.endpoint,this.port=this.config.port,this.clientId="JSDK_"+Math.floor(1e3*Math.random()),this._topics={};try{this.paho=new o.default,this._initClient()}catch(e){}return this}return r(e,[{key:"connect",value:function(e){var t=this;if(!e)throw Error("You must provide configuration options");if(!e.userName)throw Error("You must provide userName in options");if(!e.password)throw Error("You must provide password in options");return new Promise(function(n,i){var o={timeout:30,keepAliveInterval:10,cleanSession:!0,useSSL:!0,onSuccess:function(){t.isConnecting=!1,t._onConnectSuccess(),n()},onFailure:function(e){t.isConnecting=!1,t._onConnectFailure(e),i()}};Object.assign(o,e),t.client&&(t.client.onConnectionLost=function(){t._onConnectionLost(o)},t.client.onMessageArrived=function(e){t._onMessageArrived(e)},t.isConnecting||t.client.isConnected()||(t.client.connect(o),t.isConnecting=!0)),n()})}},{key:"subscribe",value:function(e,t){if(!e)throw Error("You must provide a topic");if(!t)throw Error("You must provide a callback for live events");return this.client&&this.client.isConnected()&&this.client.subscribe(e,0),this._topics[e]?this._topics[e].subscribers.push(t):(this._topics[e]={},this._topics[e].subscribers=[],this._topics[e].subscribers.push(t)),this}},{key:"unsubscribe",value:function(e,t){if(!e)throw Error("You must provide a topic");return this._topics[e]&&(this._topics[e].subscribers=this._topics[e].subscribers.filter(function(e){return t!==e})),this._topics[e]&&!t&&(this._topics[e].subscribers=[]),this._topics[e]&&0===this._topics[e].subscribers.length&&this.client.unsubscribe(e),this}},{key:"_onConnectSuccess",value:function(){for(var e in this._topics)this.client.subscribe(e,0)}},{key:"_onConnectFailure",value:function(e){console.log("onFailure",e)}},{key:"_onConnectionLost",value:function(e){var t=this;e&&(e._reconnects>=this.config.reconnectLimit?setTimeout(function(){e._reconnects=0,t.connect(e)},this.config.reconnectTimeout):(e._reconnects||(e._reconnects=0),e._reconnects++,this.connect(e)))}},{key:"_onMessageArrived",value:function(e){var t=e._getDestinationName(),n=e._getPayloadString();n=JSON.parse(e._getPayloadString());var i=this._topics[t]?this._topics[t].subscribers:null;if(i)for(var o=i.length-1;o>=0;o--){var r=i[o];r&&r(n)}}},{key:"_initClient",value:function(){return this.client=new this.paho.MQTT.Client(this.endpoint,this.port,this.clientId),this}}]),e}();e.mqtt=new s;e.default=s})},function(e,t,n){var i,o,r;!function(n,s){o=[e,t],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function e(){n(this,e);var t={};return t.MQTT=function(e){function n(e,n){var i=n,o=e[n],r=o>>4,a=o&=15;n+=1;var c,u=0,f=1;do{if(n==e.length)return[null,i];c=e[n++],u+=(127&c)*f,f*=128}while(0!=(128&c));var l=n+u;if(l>e.length)return[null,i];var p=new m(r);switch(r){case d.CONNACK:var v=e[n++];1&v&&(p.sessionPresent=!0),p.returnCode=e[n++];break;case d.PUBLISH:var g=a>>1&3,y=s(e,n);n+=2;var _=h(e,n,y);n+=y,g>0&&(p.messageIdentifier=s(e,n),n+=2);var w=new t.MQTT.Message(e.subarray(n,l));1==(1&a)&&(w.retained=!0),8==(8&a)&&(w.duplicate=!0),w.qos=g,w.destinationName=_,p.payloadMessage=w;break;case d.PUBACK:case d.PUBREC:case d.PUBREL:case d.PUBCOMP:case d.UNSUBACK:p.messageIdentifier=s(e,n);break;case d.SUBACK:p.messageIdentifier=s(e,n),n+=2,p.returnCode=e.subarray(n,l)}return[p,l]}function o(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function r(e,t,n,i){return i=o(t,n,i),u(e,n,i),i+t}function s(e,t){return 256*e[t]+e[t+1]}function a(e){var t=new Array(1),n=0;do{var i=e%128;e>>=7,e>0&&(i|=128),t[n++]=i}while(e>0&&n<4);return t}function c(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i>2047?(55296<=i&&i<=56319&&(n++,t++),t+=3):i>127?t+=2:t++}return t}function u(e,t,n){for(var i=n,o=0;o<e.length;o++){var r=e.charCodeAt(o);if(55296<=r&&r<=56319){var s=e.charCodeAt(++o);if(isNaN(s))throw new Error(y(v.MALFORMED_UNICODE,[r,s]));r=(r-55296<<10)+(s-56320)+65536}r<=127?t[i++]=r:r<=2047?(t[i++]=r>>6&31|192,t[i++]=63&r|128):r<=65535?(t[i++]=r>>12&15|224,t[i++]=r>>6&63|128,t[i++]=63&r|128):(t[i++]=r>>18&7|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=63&r|128)}return t}function h(e,t,n){for(var i,o="",r=t;r<t+n;){var s=e[r++];if(s<128)i=s;else{var a=e[r++]-128;if(a<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)i=64*(s-192)+a;else{var c=e[r++]-128;if(c<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16)]));if(s<240)i=4096*(s-224)+64*a+c;else{var u=e[r++]-128;if(u<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));if(!(s<248))throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));i=262144*(s-240)+4096*a+64*c+u}}}i>65535&&(i-=65536,o+=String.fromCharCode(55296+(i>>10)),i=56320+(1023&i)),o+=String.fromCharCode(i)}return o}var f="@VERSION@",d={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},l=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var o="Unknown property, "+n+". Valid properties are:";for(var n in t)t.hasOwnProperty(n)&&(o=o+" "+n);throw new Error(o)}if(i(e[n])!==t[n])throw new Error(y(v.INVALID_TYPE,[i(e[n]),n]))}},p=function(e,t){return function(){return e.apply(t,arguments)}},v={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},g={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},y=function(e,t){var n=e.text;if(t)for(var i,o,r=0;r<t.length;r++)if(i="{"+r+"}",o=n.indexOf(i),o>0){var s=n.substring(0,o),a=n.substring(o+i.length);n=s+t[r]+a}return n},_=[0,6,77,81,73,115,100,112,3],w=[0,4,77,81,84,84,4],m=function(e,t){this.type=e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};m.prototype.encode=function(){var e=(15&this.type)<<4,t=0,n=new Array,i=0;switch(void 0!=this.messageIdentifier&&(t+=2),this.type){case d.CONNECT:switch(this.mqttVersion){case 3:t+=_.length+3;break;case 4:t+=w.length+3}if(t+=c(this.clientId)+2,void 0!=this.willMessage){t+=c(this.willMessage.destinationName)+2;var s=this.willMessage.payloadBytes;s instanceof Uint8Array||(s=new Uint8Array(h)),t+=s.byteLength+2}void 0!=this.userName&&(t+=c(this.userName)+2),void 0!=this.password&&(t+=c(this.password)+2);break;case d.SUBSCRIBE:e|=2;for(var u=0;u<this.topics.length;u++)n[u]=c(this.topics[u]),t+=n[u]+2;t+=this.requestedQos.length;break;case d.UNSUBSCRIBE:e|=2;for(var u=0;u<this.topics.length;u++)n[u]=c(this.topics[u]),t+=n[u]+2;break;case d.PUBREL:e|=2;break;case d.PUBLISH:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),i=c(this.payloadMessage.destinationName),t+=i+2;var h=this.payloadMessage.payloadBytes;t+=h.byteLength,h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer));break;case d.DISCONNECT:}var f=a(t),l=f.length+1,p=new ArrayBuffer(t+l),v=new Uint8Array(p);if(v[0]=e,v.set(f,1),this.type==d.PUBLISH)l=r(this.payloadMessage.destinationName,i,v,l);else if(this.type==d.CONNECT){switch(this.mqttVersion){case 3:v.set(_,l),l+=_.length;break;case 4:v.set(w,l),l+=w.length}var g=0;this.cleanSession&&(g=2),void 0!=this.willMessage&&(g|=4,g|=this.willMessage.qos<<3,this.willMessage.retained&&(g|=32)),void 0!=this.userName&&(g|=128),void 0!=this.password&&(g|=64),v[l++]=g,l=o(this.keepAliveInterval,v,l)}switch(void 0!=this.messageIdentifier&&(l=o(this.messageIdentifier,v,l)),this.type){case d.CONNECT:l=r(this.clientId,c(this.clientId),v,l),void 0!=this.willMessage&&(l=r(this.willMessage.destinationName,c(this.willMessage.destinationName),v,l),l=o(s.byteLength,v,l),v.set(s,l),l+=s.byteLength),void 0!=this.userName&&(l=r(this.userName,c(this.userName),v,l)),void 0!=this.password&&(l=r(this.password,c(this.password),v,l));break;case d.PUBLISH:
v.set(h,l);break;case d.SUBSCRIBE:for(var u=0;u<this.topics.length;u++)l=r(this.topics[u],n[u],v,l),v[l++]=this.requestedQos[u];break;case d.UNSUBSCRIBE:for(var u=0;u<this.topics.length;u++)l=r(this.topics[u],n[u],v,l)}return p};var b=function(e,t,n){this._client=e,this._window=t,this._keepAliveInterval=1e3*n,this.isReset=!1;var i=new m(d.PINGREQ).encode(),o=function(e){return function(){return r.apply(e)}},r=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(i),this.timeout=this._window.setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(v.PING_TIMEOUT.code,y(v.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},E=function(e,t,n,i,o){this._window=t,n||(n=30);var r=function(e,t,n){return function(){return e.apply(t,n)}};this.timeout=setTimeout(r(i,e,o),1e3*n),this.cancel=function(){this._window.clearTimeout(this.timeout)}},I=function(t,n,i,o,r){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(y(v.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in e&&null!==e.localStorage))throw new Error(y(v.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(y(v.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",t,n,i,o,r),this.host=n,this.port=i,this.path=o,this.uri=t,this.clientId=r,this._localKey=n+":"+i+("/mqtt"!=o?":"+o:"")+":"+r+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0;for(var s in localStorage)0!=s.indexOf("Sent:"+this._localKey)&&0!=s.indexOf("Received:"+this._localKey)||this.restore(s)};I.prototype.host,I.prototype.port,I.prototype.path,I.prototype.uri,I.prototype.clientId,I.prototype.socket,I.prototype.connected=!1,I.prototype.maxMessageIdentifier=65536,I.prototype.connectOptions,I.prototype.hostIndex,I.prototype.onConnectionLost,I.prototype.onMessageDelivered,I.prototype.onMessageArrived,I.prototype.traceFunction,I.prototype._msg_queue=null,I.prototype._connectTimeout,I.prototype.sendPinger=null,I.prototype.receivePinger=null,I.prototype.receiveBuffer=null,I.prototype._traceBuffer=null,I.prototype._MAX_TRACE_ENTRIES=100,I.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(y(v.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(y(v.INVALID_STATE,["already connected"]));this.connectOptions=e,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},I.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var n=new m(d.SUBSCRIBE);n.topics=[e],void 0!=t.qos?n.requestedQos=[t.qos]:n.requestedQos=[0],t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e})}),t.timeout&&(n.timeOut=new E(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:v.SUBSCRIBE_TIMEOUT.code,errorMessage:y(v.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},I.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var n=new m(d.UNSUBSCRIBE);n.topics=[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new E(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:v.UNSUBSCRIBE_TIMEOUT.code,errorMessage:y(v.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},I.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));wireMessage=new m(d.PUBLISH),wireMessage.payloadMessage=e,e.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage)},I.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw new Error(y(v.INVALID_STATE,["not connecting or connected"]));wireMessage=new m(d.DISCONNECT),this._notify_msg_sent[wireMessage]=p(this._disconnected,this),this._schedule_message(wireMessage)},I.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var e in this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},I.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,f)},I.prototype.stopTrace=function(){delete this._traceBuffer},I.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=p(this._on_socket_open,this),this.socket.onmessage=p(this._on_socket_message,this),this.socket.onerror=p(this._on_socket_error,this),this.socket.onclose=p(this._on_socket_close,this),this.sendPinger=new b(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new b(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new E(this,window,this.connectOptions.timeout,this._disconnected,[v.CONNECT_TIMEOUT.code,y(v.CONNECT_TIMEOUT)])},I.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},I.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case d.PUBLISH:t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var i="",o=t.payloadMessage.payloadBytes,r=0;r<o.length;r++)o[r]<=15?i=i+"0"+o[r].toString(16):i+=o[r].toString(16);n.payloadMessage.payloadHex=i,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence);break;default:throw Error(y(v.INVALID_STORED_DATA,[key,n]))}localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},I.prototype.restore=function(e){var n=localStorage.getItem(e),i=JSON.parse(n),o=new m(i.type,i);switch(i.type){case d.PUBLISH:for(var r=i.payloadMessage.payloadHex,s=new ArrayBuffer(r.length/2),a=new Uint8Array(s),c=0;r.length>=2;){var u=parseInt(r.substring(0,2),16);r=r.substring(2,r.length),a[c++]=u}var h=new t.MQTT.Message(a);h.qos=i.payloadMessage.qos,h.destinationName=i.payloadMessage.destinationName,i.payloadMessage.duplicate&&(h.duplicate=!0),i.payloadMessage.retained&&(h.retained=!0),o.payloadMessage=h;break;default:throw Error(y(v.INVALID_STORED_DATA,[e,n]))}0==e.indexOf("Sent:"+this._localKey)?(o.payloadMessage.duplicate=!0,this._sentMessages[o.messageIdentifier]=o):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[o.messageIdentifier]=o)},I.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},I.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===d.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},I.prototype._on_socket_open=function(){var e=new m(d.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},I.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data),this.receivePinger.reset();for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},I.prototype._deframeMessages=function(e){var t=new Uint8Array(e);if(this.receiveBuffer){var i=new Uint8Array(this.receiveBuffer.length+t.length);i.set(this.receiveBuffer),i.set(t,this.receiveBuffer.length),t=i,delete this.receiveBuffer}try{for(var o=0,r=[];o<t.length;){var s=n(t,o),a=s[0];if(o=s[1],null===a)break;r.push(a)}o<t.length&&(this.receiveBuffer=t.subarray(o))}catch(e){return void this._disconnected(v.INTERNAL_ERROR.code,y(v.INTERNAL_ERROR,[e.message,e.stack.toString()]))}return r},I.prototype._handleMessage=function(e){switch(this._trace("Client._handleMessage",e),e.type){case d.CONNACK:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+n.messageIdentifier)}this._sentMessages={};for(var t in this._receivedMessages){var i=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(v.CONNACK_RETURNCODE.code,y(v.CONNACK_RETURNCODE,[e.returnCode,g[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var o=new Array;for(var r in this._sentMessages)this._sentMessages.hasOwnProperty(r)&&o.push(this._sentMessages[r]);for(var o=o.sort(function(e,t){return e.sequence-t.sequence}),s=0,a=o.length;s<a;s++){var n=o[s];if(n.type==d.PUBLISH&&n.pubRecReceived){var c=new m(d.PUBREL,{messageIdentifier:n.messageIdentifier});this._schedule_message(c)}else this._schedule_message(n)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case d.PUBLISH:this._receivePublish(e);break;case d.PUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case d.PUBREC:var n=this._sentMessages[e.messageIdentifier];if(n){n.pubRecReceived=!0;var c=new m(d.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",n),this._schedule_message(c)}break;case d.PUBREL:var i=this._receivedMessages[e.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[e.messageIdentifier]);var u=new m(d.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(u);break;case d.PUBCOMP:var n=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case d.SUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),e.returnCode.indexOf=Array.prototype.indexOf,e.returnCode.indexOf(128)!==-1?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case d.UNSUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case d.PINGRESP:this.sendPinger.reset();break;case d.DISCONNECT:this._disconnected(v.INVALID_MQTT_MESSAGE_TYPE.code,y(v.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(v.INVALID_MQTT_MESSAGE_TYPE.code,y(v.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}},I.prototype._on_socket_error=function(e){this._disconnected(v.SOCKET_ERROR.code,y(v.SOCKET_ERROR,[e.data]))},I.prototype._on_socket_close=function(){this._disconnected(v.SOCKET_CLOSE.code,y(v.SOCKET_CLOSE))},I.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},I.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new m(d.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new m(d.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},I.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},I.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=v.OK.code,t=y(v.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},I.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)"undefined"!=typeof arguments[e]&&(arguments[e]=JSON.stringify(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer)for(var e=0,n=arguments.length;e<n;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):"undefined"==typeof arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))},I.prototype._traceMask=function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(i==t?n[i]="******":n[i]=e[i]);return n};var M=function(e,t,n,o){var r;if("string"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":i(e),"host"]));if(2==arguments.length){o=t,r=e;var s=r.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!s)throw new Error(y(v.INVALID_ARGUMENT,[e,"host"]));e=s[4]||s[2],t=parseInt(s[7]),n=s[8]}else{if(3==arguments.length&&(o=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof t?"undefined":i(t),"port"]));if("string"!=typeof n)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof n?"undefined":i(n),"path"]));var a=e.indexOf(":")!=-1&&"["!=e.slice(0,1)&&"]"!=e.slice(-1);r="ws://"+(a?"["+e+"]":e)+":"+t+n}for(var c=0,u=0;u<o.length;u++){var h=o.charCodeAt(u);55296<=h&&h<=56319&&u++,c++}if("string"!=typeof o||c>65535)throw new Error(y(v.INVALID_ARGUMENT,[o,"clientId"]));var f=new I(r,e,t,n,o);this._getHost=function(){return e},this._setHost=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getPath=function(){return n},this._setPath=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getURI=function(){return r},this._setURI=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getClientId=function(){return f.clientId},this._setClientId=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return f.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":i(e),"onConnectionLost"]));f.onConnectionLost=e},this._getOnMessageDelivered=function(){return f.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":i(e),"onMessageDelivered"]));f.onMessageDelivered=e},this._getOnMessageArrived=function(){return f.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":i(e),"onMessageArrived"]));f.onMessageArrived=e},this._getTrace=function(){return f.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":i(e),"onTrace"]));f.traceFunction=e},this.connect=function(e){if(e=e||{},l(e,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(y(v.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0===e.password&&void 0!==e.userName)throw new Error(y(v.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof P))throw new Error(y(v.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,"undefined"==typeof e.willMessage.destinationName)throw new Error(y(v.INVALID_TYPE,[i(e.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if("undefined"==typeof e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(y(v.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,o=0;o<e.hosts.length;o++){if("string"!=typeof e.hosts[o])throw new Error(y(v.INVALID_TYPE,[i(e.hosts[o]),"connectOptions.hosts["+o+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[o])){if(0==o)t=!0;else if(!t)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}else if(t)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(var o=0;o<e.hosts.length;o++){if("number"!=typeof e.ports[o]||e.ports[o]<0)throw new Error(y(v.INVALID_TYPE,[i(e.ports[o]),"connectOptions.ports["+o+"]"]));var s=e.hosts[o],a=e.ports[o],c=s.indexOf(":")!=-1;r="ws://"+(c?"["+s+"]":s)+":"+a+n,e.uris.push(r)}}}f.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},l(t,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if("undefined"!=typeof t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(y(v.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));f.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},l(t,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");f.unsubscribe(e,t)},this.send=function(e,t,n,o){var r;if(0==arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof P)&&"string"!=typeof e)throw new Error("Invalid argument:"+("undefined"==typeof e?"undefined":i(e)));if(r=e,"undefined"==typeof r.destinationName)throw new Error(y(v.INVALID_ARGUMENT,[r.destinationName,"Message.destinationName"]));f.send(r)}else r=new P(t),r.destinationName=e,arguments.length>=3&&(r.qos=n),arguments.length>=4&&(r.retained=o),f.send(r)},this.disconnect=function(){f.disconnect()},this.getTraceLog=function(){return f.getTraceLog()},this.startTrace=function(){f.startTrace()},this.stopTrace=function(){f.stopTrace()},this.isConnected=function(){return f.connected}};M.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var P=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw y(v.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:h(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(c(t)),n=new Uint8Array(e);return u(t,n,0),n}return t};var n=void 0;this._getDestinationName=function(){return n},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(y(v.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e};var i=0;this._getQos=function(){return i},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);i=e};var o=!1;this._getRetained=function(){return o},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(y(v.INVALID_ARGUMENT,[e,"newRetained"]));o=e};var r=!1;this._getDuplicate=function(){return r},this._setDuplicate=function(e){r=e}};return P.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:M,Message:P}}(window),t};t.default=o,e.exports=t.default})},function(e,t,n){var i,o,r;!function(s,a){o=[t,n(4)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e={init:function(){},public:{toArray:[],toDictionary:{}},clear:function(){e.public.toArray=[],e.public.toDictionary=[]}};return e}Object.defineProperty(e,"__esModule",{value:!0}),e.prototypeCache=e.cache=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e.cache=i(),s=e.prototypeCache=i(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments[1];n(this,e),this.config=i,t&&(this.id=t)}return o(e,[{key:"getAllModels",value:function(){var e=this;return new Promise(function(n,i){r.public.toArray.length>0?n(r.public.toArray):t.ajax.get("/device-models",{queryObj:"limit=100000",contentType:"application/hal+json"}).then(function(t){r.public.toArray=t.models,e._makeDictionary(r.public.toArray),n(r.public.toArray)}).catch(function(e){i(e)})})}},{key:"getAllPrototypes",value:function(){var e=this;return new Promise(function(n,i){s.public.toArray.length>0?n(s.public.toArray):t.ajax.get("/device-models/prototypes",{queryObj:"limit=100000",contentType:"application/hal+json"}).then(function(t){s.public.toArray=t.prototypes,e._makeDictionary(s.public.toArray),n(s.public.toArray)}).catch(function(e){i(e)})})}},{key:"getModel",value:function(e){return this.id&&!e&&(e=this.id),r.public.toDictionary[e]?new Promise(function(t,n){t(r.public.toDictionary[e])}):new Promise(function(n,i){t.ajax.get("/device-models/"+e,{contentType:"application/hal+json"}).then(function(t){r.public.toArray.push(t),r.public.toDictionary[e]=t,n(t)}).catch(function(e){i(e)})})}},{key:"_getModelById",value:function(e){return r.public.toArray.length>0?r.public.toDictionary[e]||null:null}},{key:"_getPublicModelsFromArray",value:function(){return r.public.toArray||[]}},{key:"_getPublicModelsFromDictionary",value:function(){return r.public.toDictionary||[]}},{key:"_makeDictionary",value:function(e){if(e){r.public.toDictionary||(r.public.toDictionary={});for(var t=e.length,n=0;t--;){var i=e[n];r.public.toDictionary[i.id]=i,n++}return r.public.toDictionary}}}]),e}();e.default=a})},function(e,t,n){var i,o,r;!function(s,a){o=[e,t,n(4)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.id=t.id,this.secret=t.secret,this.name=t.name,this.topic=t.topic,this.owner=t.owner,this.integrationType=t.integrationType}return o(e,[{key:"deleteTransmitter",value:function(e){var t=this;if(!this.id)throw new Error("Provide the id during instantiation");return new Promise(function(i,o){n.ajax.delete("/transmitters/"+t.id,e).then(function(e){i(e)}).catch(function(e){o(e)})})}},{key:"updateTransmitter",value:function(e,t){var i=this;if(!this.id)throw new Error("Provide the id during instantiation");if(!e)throw new Error("Provide a patch of parameters to update");if(!Object.keys(e).length)throw new Error("Provide a patch with some parameters to update");for(var o in e)if(!this.hasOwnProperty(o))throw new Error("Provide a patch with relevant parameters to update");return new Promise(function(o,r){n.ajax.patch("/transmitters/"+i.id,e,t).then(function(e){i.id=e.id,i.secret=e.secret,i.name=e.name,i.topic=e.topic,i.owner=e.owner,i.integrationType=e.integrationType,o(e)}).catch(function(e){r(e)})})}}]),e}();t.default=r,e.exports=t.default})},function(e,t,n){var i,o,r;!function(s,a){o=[e,t,n(4)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.owner=t.owner,this.position=t.position,this.id=t.id,this.devices=t.devices,this.name=t.name}return o(e,[{key:"getGroup",value:function(){var e=this;if(!this.id)throw new Error("Provide the group id during instantiation");return new Promise(function(t,i){n.ajax.get("/groups/"+e.id).then(function(e){t(e)}).catch(function(e){i(e)})})}},{key:"getGroupDevices",value:function(){var e=this;if(!this.id)throw new Error("Provide the group id during instantiation");return new Promise(function(t,i){n.ajax.get("/groups/"+e.id).then(function(e){t(e.devices)}).catch(function(e){i(e)})})}},{key:"deleteGroup",value:function(e){var t=this;if(!this.id)throw new Error("Provide the group id during instantiation");return new Promise(function(i,o){n.ajax.delete("/groups/"+t.id,e).then(function(e){i(e)}).catch(function(e){o(e)})})}},{key:"updateGroup",value:function(e,t){var i=this;if(!this.id)throw new Error("Provide the group id during instantiation");if(!e)throw new Error("Provide a patch of parameters to update");if(!Object.keys(e).length)throw new Error("Provide a patch with some parameters to update");for(var o in e)if(!this.hasOwnProperty(o))throw new Error("Provide a patch with relevant parameters to update");return new Promise(function(o,r){n.ajax.patch("/groups/"+i.id,e,t).then(function(e){i.owner=e.owner,i.position=e.position,i.id=e.id,i.devices=e.devices,i.name=e.name,o(e)}).catch(function(e){r(e)})})}}]),e}();t.default=r,e.exports=t.default})}])});